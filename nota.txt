socket.on("mensaje_chat", (mensaje) => {
  console.log("Escuchando por: mensaje_chat");
  console.log(mensaje);

  const listaMensajes = document.querySelector(".chat__list-messages");

  // Crear un elemento div para el mensaje
  const mensajeDiv = document.createElement("div");
  
  // Agregar clases CSS al elemento del mensaje en funci√≥n del remitente
  if (mensaje.desde_id_user === session['id_user']) {
    mensajeDiv.classList.add("chat__bubble", "chat__bubble--me");
  } else {
    mensajeDiv.classList.add("chat__bubble", "chat__bubble--you");
  }

  // Establecer el contenido del mensaje
  mensajeDiv.innerHTML = mensaje.mensaje;

  // Agregar el mensaje al contenedor de mensajes
  listaMensajes.appendChild(mensajeDiv);

  // Hacer scroll para mostrar el nuevo mensaje
  scroll_chat();
});





  document.addEventListener("DOMContentLoaded", function () {
        $("html, body").animate({ scrollTop: $("body").offset().top }, 200);
      });




<br />
{{ lista_mensajes }}
<br />

{% if lista_mensajes['para_id_user'] != lista_mensajes['desde_id_user'] %}
<li>
  <div class="chat__bubble chat__bubble--me">
    {{ lista_mensajes['mensaje'] }} - {{ session['id_user'] }}
  </div>
</li>
{% else %}
<li>
  <div class="chat__bubble chat__bubble--you">
    {{ lista_mensajes['mensaje'] }} *** {{ session['id_user']}}
  </div>
</li>
{% endif %}



  {% set user = session['user'] %} {{ session['id_user'] }} - {{ user }}